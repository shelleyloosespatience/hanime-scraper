{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///home/impact/Downloads/hanime-scraper/hanime-scraper/app/hanime/page.tsx"],"sourcesContent":["// app/hanime/page.tsx - Fixed version with proper tag functionality\n'use client';\n\nimport { useState, useEffect, useRef, useCallback } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { motion, AnimatePresence } from 'framer-motion';\n\n// Custom SVG Components\nconst CustomArrowSVG = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M13.5 7.5L18 12L13.5 16.5M18 12H6\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n  </svg>\n);\n\nconst TrendingIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\" fill=\"currentColor\"/>\n  </svg>\n);\n\nconst NewIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" fill=\"currentColor\"/>\n  </svg>\n);\n\nconst DiscoverIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\"/>\n    <circle cx=\"9\" cy=\"9\" r=\"2\" fill=\"currentColor\"/>\n    <path d=\"M21 15l-3.086-3.086a2 2 0 0 0-2.828 0L6 21\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n  </svg>\n);\n\nconst FeaturedIcon = () => (\n  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <polygon points=\"12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26\" fill=\"currentColor\"/>\n  </svg>\n);\n\nconst SearchIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <circle cx=\"11\" cy=\"11\" r=\"8\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n    <path d=\"m21 21-4.35-4.35\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n  </svg>\n);\n\nconst TagIcon = () => (\n  <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z\" stroke=\"currentColor\" strokeWidth=\"2\" fill=\"none\"/>\n    <line x1=\"7\" y1=\"7\" x2=\"7.01\" y2=\"7\" stroke=\"currentColor\" strokeWidth=\"2\"/>\n  </svg>\n);\n\ninterface Video {\n  id: string;\n  slug: string;\n  name: string;\n  poster_url: string;\n  cover_url: string;\n  views: number;\n  likes?: number;\n  brand: string;\n  duration: number;\n  rating?: number;\n  is_censored?: boolean;\n}\n\ninterface Tag {\n  id: string;\n  name: string;\n  slug?: string;\n  [key: string]: any;\n}\n\n// Utility Functions\nconst calculateRating = (views: number): number => {\n  if (views > 10000000) return 4.8 + Math.random() * 0.2;\n  if (views > 5000000) return 4.5 + Math.random() * 0.4;\n  if (views > 1000000) return 4.0 + Math.random() * 0.6;\n  if (views > 500000) return 3.8 + Math.random() * 0.7;\n  return 3.5 + Math.random() * 1.0;\n};\n\nconst SectionHeader = ({ title, icon: IconComponent, onViewAll, showViewAll = true }: { \n  title: string; \n  icon: React.ComponentType; \n  onViewAll?: () => void;\n  showViewAll?: boolean;\n}) => (\n  <div className=\"flex items-center justify-between mb-8\">\n    <motion.h2 \n      initial={{ opacity: 0, x: -20 }}\n      animate={{ opacity: 1, x: 0 }}\n      transition={{ delay: 0.4 }}\n      className=\"text-3xl font-bold text-white flex items-center gap-3\"\n    >\n      <span className=\"animate-bounce text-pink-400\">\n        <IconComponent />\n      </span> \n      {title}\n    </motion.h2>\n    \n    {showViewAll && (\n      <motion.button\n        onClick={onViewAll}\n        initial={{ opacity: 0, x: 20 }}\n        animate={{ opacity: 1, x: 0 }}\n        transition={{ delay: 0.4 }}\n        className=\"px-4 py-2 rounded-2xl font-medium bg-white/10 text-white hover:bg-white/20 transition-all flex items-center gap-2\"\n      >\n        <CustomArrowSVG />\n        View All\n      </motion.button>\n    )}\n  </div>\n);\n\nconst LoadingSkeleton = () => (\n  <div className=\"animate-pulse\">\n    <div style={{ aspectRatio: '2/3' }} className=\"bg-white/10 rounded-xl\"></div>\n    <div className=\"mt-4 space-y-3\">\n      <div className=\"h-5 bg-white/10 rounded\"></div>\n      <div className=\"h-4 bg-white/10 rounded w-2/3\"></div>\n    </div>\n  </div>\n);\n\n// Pagination Component\nconst Pagination = ({ currentPage, totalPages, onPageChange }: {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n}) => (\n  <div className=\"flex justify-center items-center gap-2 mt-8\">\n    <button\n      onClick={() => onPageChange(Math.max(0, currentPage - 1))}\n      disabled={currentPage === 0}\n      className=\"px-4 py-2 rounded-lg bg-white/10 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/20 transition-all\"\n    >\n      Previous\n    </button>\n    \n    <span className=\"px-4 py-2 text-white\">\n      Page {currentPage + 1} of {totalPages}\n    </span>\n    \n    <button\n      onClick={() => onPageChange(Math.min(totalPages - 1, currentPage + 1))}\n      disabled={currentPage >= totalPages - 1}\n      className=\"px-4 py-2 rounded-lg bg-white/10 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/20 transition-all\"\n    >\n      Next\n    </button>\n  </div>\n);\n\nexport default function HanimePage() {\n  const router = useRouter();\n  const [featuredAnimes, setFeaturedAnimes] = useState<Video[]>([]);\n  const [trendingVideos, setTrendingVideos] = useState<Video[]>([]);\n  const [newVideos, setNewVideos] = useState<Video[]>([]);\n  const [randomTagVideos, setRandomTagVideos] = useState<Video[]>([]);\n  const [randomTag, setRandomTag] = useState<string>('');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [searchResults, setSearchResults] = useState<Video[]>([]);\n  const [showSearchResults, setShowSearchResults] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [loadingMore, setLoadingMore] = useState(false);\n  const [trendingTimeframe, setTrendingTimeframe] = useState('week');\n  const scrollContainerRef = useRef<HTMLDivElement>(null);\n  const searchInputRef = useRef<HTMLInputElement>(null);\n  const [isSearchFocused, setIsSearchFocused] = useState(false);\n  const [searchMode, setSearchMode] = useState<'anime' | 'tag'>('anime');\n  const [tagSuggestions, setTagSuggestions] = useState<Tag[]>([]);\n  const [selectedTag, setSelectedTag] = useState<Tag | null>(null);\n  \n  // NEW: Tag-specific states\n  const [showTagSection, setShowTagSection] = useState(false);\n  const [tagSectionVideos, setTagSectionVideos] = useState<Video[]>([]);\n  const [tagCurrentPage, setTagCurrentPage] = useState(0);\n  const [tagTotalPages, setTagTotalPages] = useState(0);\n  const [tagLoading, setTagLoading] = useState(false);\n\n  // Auto-scroll featured animes\n  useEffect(() => {\n    const container = scrollContainerRef.current;\n    if (!container) return;\n\n    let scrollInterval: NodeJS.Timeout;\n    let isPaused = false;\n\n    const startScroll = () => {\n      scrollInterval = setInterval(() => {\n        if (!isPaused && container) {\n          container.scrollLeft += 1.5;\n          if (container.scrollLeft >= container.scrollWidth / 2) {\n            container.scrollLeft = 0;\n          }\n        }\n      }, 30);\n    };\n\n    container.addEventListener('mouseenter', () => { isPaused = true; });\n    container.addEventListener('mouseleave', () => { isPaused = false; });\n    \n    startScroll();\n    return () => {\n      clearInterval(scrollInterval);\n    };\n  }, [featuredAnimes]);\n\n  // Initial load with randomization\n  useEffect(() => {\n    fetchInitialData();\n  }, []);\n\n  const shuffleArray = (array: any[]) => {\n    const shuffled = [...array];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n      const j = Math.floor(Math.random() * (i + 1));\n      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    return shuffled;\n  };\n\n  const fetchInitialData = async () => {\n    setLoading(true);\n    try {\n      // Fetch multiple pages for more content\n      const [featuredRes, trending1, trending2, new1, new2, tagsRes] = await Promise.all([\n        fetch('/api/hanime/trending?time=month&page=0'),\n        fetch('/api/hanime/trending?time=week&page=0'),\n        fetch('/api/hanime/trending?time=week&page=1'),\n        fetch('/api/hanime/trending?time=day&page=0'),\n        fetch('/api/hanime/trending?time=day&page=1'),\n        fetch('/api/hanime/tags')\n      ]);\n\n      const featuredData = await featuredRes.json();\n      const trending1Data = await trending1.json();\n      const trending2Data = await trending2.json();\n      const new1Data = await new1.json();\n      const new2Data = await new2.json();\n      const tagsData = await tagsRes.json();\n\n      // Set featured (keep in order for quality)\n      setFeaturedAnimes(featuredData.results?.slice(0, 20) || []);\n\n      // Combine and randomize trending\n      const allTrending = [...(trending1Data.results || []), ...(trending2Data.results || [])];\n      setTrendingVideos(shuffleArray(allTrending).slice(0, 50));\n\n      // Combine and randomize new\n      const allNew = [...(new1Data.results || []), ...(new2Data.results || [])];\n      setNewVideos(shuffleArray(allNew).slice(0, 50));\n\n      // Get random tag and fetch videos for it\n      if (tagsData.tags && tagsData.tags.length > 0) {\n        const randomTagObj = tagsData.tags[Math.floor(Math.random() * tagsData.tags.length)];\n        setRandomTag(randomTagObj.name);\n        \n        const tagVideosRes = await fetch(`/api/hanime/tags/${encodeURIComponent(randomTagObj.name)}?page=0`);\n        const tagVideosData = await tagVideosRes.json();\n        setRandomTagVideos(shuffleArray(tagVideosData.results || []).slice(0, 20));\n      }\n    } catch (error) {\n      console.error('Error fetching initial data:', error);\n    }\n    setLoading(false);\n  };\n\n  const handleTimeframeChange = async (timeframe: string) => {\n    setTrendingTimeframe(timeframe);\n    setLoading(true);\n    \n    try {\n      const [res1, res2] = await Promise.all([\n        fetch(`/api/hanime/trending?time=${timeframe}&page=0`),\n        fetch(`/api/hanime/trending?time=${timeframe}&page=1`)\n      ]);\n      \n      const data1 = await res1.json();\n      const data2 = await res2.json();\n      \n      const combined = [...(data1.results || []), ...(data2.results || [])];\n      setTrendingVideos(shuffleArray(combined).slice(0, 50));\n    } catch (error) {\n      console.error('Error changing timeframe:', error);\n    }\n    \n    setLoading(false);\n  };\n\n  // FIXED: Separate handlers for anime and tag search\n  const handleAnimeSearch = async (query: string) => {\n    if (!query.trim()) {\n      setShowSearchResults(false);\n      setSearchResults([]);\n      return;\n    }\n    \n    try {\n      const res = await fetch(`/api/hanime/search?q=${encodeURIComponent(query)}&page=0`);\n      const data = await res.json();\n      setSearchResults(data.results || []);\n      setShowSearchResults(true);\n    } catch (error) {\n      console.error('Error searching anime:', error);\n      setSearchResults([]);\n      setShowSearchResults(false);\n    }\n  };\n\n  const handleTagSearch = async (query: string) => {\n    if (!query.trim()) {\n      setTagSuggestions([]);\n      return;\n    }\n    \n    try {\n      const res = await fetch(`/api/hanime/tags?query=${encodeURIComponent(query)}`);\n      const data = await res.json();\n      setTagSuggestions(data.tags || []);\n    } catch (error) {\n      console.error('Error searching tags:', error);\n      setTagSuggestions([]);\n    }\n  };\n\n  // FIXED: Proper tag selection handler\n  const handleTagSelect = async (tag: Tag) => {\n    setSelectedTag(tag);\n    setSearchQuery(tag.name);\n    setTagSuggestions([]);\n    setShowSearchResults(false);\n    setIsSearchFocused(false);\n    \n    // Hide other sections and show tag section\n    setShowTagSection(true);\n    setTagCurrentPage(0);\n    await fetchTagVideos(tag.name, 0);\n  };\n\n  const fetchTagVideos = async (tagName: string, page: number) => {\n    setTagLoading(true);\n    try {\n      const res = await fetch(`/api/hanime/tags/${encodeURIComponent(tagName)}?page=${page}`);\n      const data = await res.json();\n      \n      setTagSectionVideos(data.results || []);\n      // Assuming 20 items per page, calculate total pages\n      setTagTotalPages(Math.ceil((data.total || 100) / 20));\n    } catch (error) {\n      console.error('Error fetching tag videos:', error);\n      setTagSectionVideos([]);\n    }\n    setTagLoading(false);\n  };\n\n  const handleTagPageChange = (page: number) => {\n    if (selectedTag) {\n      setTagCurrentPage(page);\n      fetchTagVideos(selectedTag.name, page);\n    }\n  };\n\n  const handleVideoClick = (slug: string) => {\n    router.push(`/hanime/watch/${slug}`);\n  };\n\n  const handleViewAllTrending = () => {\n    router.push('/hanime/trending');\n  };\n\n  const handleViewAllNew = () => {\n    router.push('/hanime/new');\n  };\n\n  const handleViewAllTag = () => {\n    if (randomTag) {\n      router.push(`/hanime/tag/${encodeURIComponent(randomTag)}`);\n    }\n  };\n\n  // FIXED: Clear tag section when switching modes\n  const handleSearchModeChange = (mode: 'anime' | 'tag') => {\n    setSearchMode(mode);\n    setSearchQuery('');\n    setShowSearchResults(false);\n    setTagSuggestions([]);\n    setSelectedTag(null);\n    setShowTagSection(false);\n    setSearchResults([]);\n  };\n\n  const timeframeOptions = [\n    { value: 'day', label: 'Today', icon: 'üåÖ' },\n    { value: 'week', label: 'This Week', icon: 'üìÖ' },\n    { value: 'month', label: 'This Month', icon: 'üìÜ' },\n    { value: '3_month', label: '3 Months', icon: 'üóìÔ∏è' },\n    { value: 'year', label: 'This Year', icon: 'üéä' },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-950 via-purple-950/20 to-black\">\n      {/* Animated Background */}\n      <div className=\"fixed inset-0 overflow-hidden pointer-events-none\">\n        <div className=\"absolute -top-40 -right-40 w-80 h-80 bg-pink-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob\"></div>\n        <div className=\"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000\"></div>\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-indigo-500 rounded-full mix-blend-multiply filter blur-3xl opacity-10 animate-blob animation-delay-4000\"></div>\n      </div>\n\n      {/* Auto-scrolling Featured Section */}\n      <section className=\"relative overflow-hidden py-8 bg-gradient-to-b from-black/20 to-transparent\">\n        <div className=\"max-w-[1920px] mx-auto px-6\">\n          <motion.h2 \n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.2 }}\n            className=\"text-3xl font-bold text-white mb-6 flex items-center gap-3\"\n          >\n            <span className=\"animate-pulse text-yellow-400\">\n              <FeaturedIcon />\n            </span> \n            Featured Anime\n          </motion.h2>\n          \n          <div className=\"relative\">\n            <div className=\"absolute left-0 top-0 bottom-0 w-32 bg-gradient-to-r from-gray-950 to-transparent z-10 pointer-events-none\"></div>\n            <div className=\"absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-gray-950 to-transparent z-10 pointer-events-none\"></div>\n            \n            <div \n              ref={scrollContainerRef}\n              className=\"flex gap-6 overflow-x-auto scrollbar-hide\"\n              style={{ scrollBehavior: 'smooth' }}\n            >\n              {[...featuredAnimes, ...featuredAnimes].map((anime, index) => (\n                <motion.div\n                  key={`${anime.id}-${index}`}\n                  initial={{ opacity: 0, scale: 0.9 }}\n                  animate={{ opacity: 1, scale: 1 }}\n                  transition={{ delay: index * 0.05 }}\n                  whileHover={{ scale: 1.05, y: -5 }}\n                  onClick={() => handleVideoClick(anime.slug)}\n                  className=\"flex-shrink-0 flex bg-white/5 backdrop-blur-lg rounded-2xl p-4 cursor-pointer hover:bg-white/10 transition-all group border border-white/10 hover:border-pink-500/50\"\n                  style={{ width: '450px' }}\n                >\n                  <div className=\"w-28 h-36 rounded-xl overflow-hidden flex-shrink-0 shadow-lg\">\n                    <img\n                      src={anime.cover_url || anime.poster_url}\n                      alt={anime.name}\n                      className=\"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\n                    />\n                  </div>\n                  \n                  <div className=\"ml-4 flex flex-col justify-between py-1 flex-1\">\n                    <div>\n                      <h3 className=\"font-bold text-white line-clamp-2 group-hover:text-pink-400 transition-colors text-lg\">\n                        {anime.name}\n                      </h3>\n                      <p className=\"text-sm text-purple-400 mt-1 font-medium\">{anime.brand}</p>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-4 text-sm mt-2\">\n                      <span className=\"text-yellow-400 flex items-center gap-1\">\n                        <span className=\"text-lg\">‚òÖ</span> \n                        {calculateRating(anime.views).toFixed(1)}\n                      </span>\n                      <span className=\"text-gray-400\">üëÅ {(anime.views / 1000).toFixed(1)}K</span>\n                    </div>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* FIXED: Big Search Section */}\n      <section className=\"py-12 relative\">\n        <div className=\"max-w-4xl mx-auto px-6\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: 0.3 }}\n            className=\"relative\"\n          >\n            <div className=\"flex gap-2 mb-2\">\n              <button\n                className={`px-4 py-2 rounded-full text-sm font-bold transition-all flex items-center gap-2 ${searchMode === 'anime' ? 'bg-pink-500 text-white' : 'bg-white/10 text-gray-300'}`}\n                onClick={() => handleSearchModeChange('anime')}\n              >\n                <SearchIcon />\n                Anime\n              </button>\n              <button\n                className={`px-4 py-2 rounded-full text-sm font-bold transition-all flex items-center gap-2 ${searchMode === 'tag' ? 'bg-purple-500 text-white' : 'bg-white/10 text-gray-300'}`}\n                onClick={() => handleSearchModeChange('tag')}\n              >\n                <TagIcon />\n                Tag\n              </button>\n            </div>\n            \n            <div className={`relative transition-all duration-300 ${isSearchFocused ? 'scale-105' : ''}`}>\n              <input\n                ref={searchInputRef}\n                type=\"text\"\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                  if (searchMode === 'anime') {\n                    handleAnimeSearch(e.target.value);\n                  } else {\n                    handleTagSearch(e.target.value);\n                  }\n                }}\n                onFocus={() => setIsSearchFocused(true)}\n                onBlur={() => setTimeout(() => setIsSearchFocused(false), 200)}\n                placeholder={searchMode === 'tag' ? 'Search by tag...' : 'Search for your favorite anime...'}\n                className=\"w-full px-8 py-6 text-xl rounded-3xl bg-white/10 backdrop-blur-lg border-2 border-white/20 focus:border-pink-500 outline-none text-white placeholder-gray-400 transition-all\"\n              />\n              <div className=\"absolute inset-0 rounded-3xl bg-gradient-to-r from-pink-500/20 to-purple-500/20 blur-xl -z-10 opacity-0 group-focus-within:opacity-100 transition-opacity\"></div>\n            </div>\n            \n            {/* FIXED: Separate dropdowns for anime and tag search */}\n            <AnimatePresence>\n              {searchMode === 'tag' && tagSuggestions.length > 0 && isSearchFocused && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"absolute top-full left-0 right-0 mt-4 bg-black/90 backdrop-blur-xl rounded-2xl border border-white/20 max-h-96 overflow-y-auto z-50\"\n                >\n                  {tagSuggestions.map((tag) => (\n                    <div\n                      key={tag.name}\n                      onClick={() => handleTagSelect(tag)}\n                      className=\"flex items-center gap-4 p-4 hover:bg-white/10 cursor-pointer transition-colors\"\n                    >\n                      <span className=\"text-purple-400 font-bold\">\n                        <TagIcon />\n                      </span>\n                      <span className=\"text-white font-semibold line-clamp-1\">{tag.name}</span>\n                    </div>\n                  ))}\n                </motion.div>\n              )}\n              \n              {searchMode === 'anime' && showSearchResults && searchResults.length > 0 && (\n                <motion.div\n                  initial={{ opacity: 0, y: -10 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  exit={{ opacity: 0, y: -10 }}\n                  className=\"absolute top-full left-0 right-0 mt-4 bg-black/90 backdrop-blur-xl rounded-2xl border border-white/20 max-h-96 overflow-y-auto z-50\"\n                >\n                  {searchResults.map((result) => (\n                    <div\n                      key={result.id}\n                      onClick={() => {\n                        handleVideoClick(result.slug);\n                        setShowSearchResults(false);\n                        setIsSearchFocused(false);\n                      }}\n                      className=\"flex items-center gap-4 p-4 hover:bg-white/10 cursor-pointer transition-colors\"\n                    >\n                      <img \n                        src={result.cover_url || result.poster_url} \n                        alt={result.name}\n                        className=\"w-16 h-20 object-cover rounded-lg\"\n                      />\n                      <div className=\"flex-1\">\n                        <h4 className=\"text-white font-semibold line-clamp-1\">{result.name}</h4>\n                        <p className=\"text-sm text-gray-400\">{result.brand} ‚Ä¢ <span className=\"text-yellow-400\">‚òÖ {calculateRating(result.views).toFixed(1)}</span> ‚Ä¢ {(result.views / 1000).toFixed(1)}K views</p>\n                      </div>\n                    </div>\n                  ))}\n                </motion.div>\n              )}\n            </AnimatePresence>\n          </motion.div>\n        </div>\n      </section>\n\n      <main className=\"max-w-[1920px] mx-auto px-6 pb-20\">\n        {/* NEW: Tag Results Section - Shows when a tag is selected */}\n        {showTagSection && selectedTag && (\n          <section className=\"mb-24\">\n            <div className=\"flex items-center justify-between mb-8\">\n              <motion.h2 \n                initial={{ opacity: 0, x: -20 }}\n                animate={{ opacity: 1, x: 0 }}\n                className=\"text-3xl font-bold text-white flex items-center gap-3\"\n              >\n                <span className=\"text-purple-400\">\n                  <TagIcon />\n                </span>\n                Results for: \n                <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400\">\n                  {selectedTag.name}\n                </span>\n              </motion.h2>\n              \n              <button\n                onClick={() => setShowTagSection(false)}\n                className=\"px-4 py-2 rounded-2xl font-medium bg-red-500/20 text-red-400 hover:bg-red-500/30 transition-all\"\n              >\n                Close\n              </button>\n            </div>\n            \n            {tagLoading ? (\n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 sm:gap-6\">\n                {[...Array(20)].map((_, i) => (\n                  <LoadingSkeleton key={i} />\n                ))}\n              </div>\n            ) : (\n              <>\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 sm:gap-6\">\n                  {tagSectionVideos.map((video, index) => (\n                    <motion.div\n                      key={`tag-result-${video.id}`}\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.02 }}\n                    >\n                      <VideoCard video={video} onClick={() => handleVideoClick(video.slug)} />\n                    </motion.div>\n                  ))}\n                </div>\n                \n                {tagTotalPages > 1 && (\n                  <Pagination\n                    currentPage={tagCurrentPage}\n                    totalPages={tagTotalPages}\n                    onPageChange={handleTagPageChange}\n                  />\n                )}\n              </>\n            )}\n          </section>\n        )}\n\n        {/* Only show other sections when tag section is not active */}\n        {!showTagSection && (\n          <>\n            {/* Trending Section */}\n            <section className=\"mb-24\">\n              <SectionHeader title=\"Trending Anime\" icon={TrendingIcon} onViewAll={handleViewAllTrending} />\n              \n              {loading ? (\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 sm:gap-6\">\n                  {[...Array(8)].map((_, i) => (\n                    <LoadingSkeleton key={i} />\n                  ))}\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 sm:gap-6\">\n                  {trendingVideos.map((video, index) => (\n                    <motion.div\n                      key={`trending-${video.id}-${index}`}\n                      initial={{ opacity: 0, y: 20 }}\n                      animate={{ opacity: 1, y: 0 }}\n                      transition={{ delay: index * 0.02 }}\n                    >\n                      <VideoCard video={video} onClick={() => handleVideoClick(video.slug)} />\n                    </motion.div>\n                  ))}\n                </div>\n              )}\n            </section>\n\n            {/* New Releases Section */}\n            <section className=\"mb-16\">\n              <SectionHeader \n                title=\"New Releases\" \n                icon={NewIcon} \n                onViewAll={handleViewAllNew}\n              />\n              \n              <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 sm:gap-6\">\n                {newVideos.map((video, index) => (\n                  <motion.div\n                    key={`new-${video.id}-${index}`}\n                    initial={{ opacity: 0, y: 20 }}\n                    animate={{ opacity: 1, y: 0 }}\n                    transition={{ delay: 0.5 + index * 0.02 }}\n                  >\n                    <VideoCard video={video} onClick={() => handleVideoClick(video.slug)} isNew />\n                  </motion.div>\n                ))}\n              </div>\n            </section>\n\n            {/* Random Tag Section */}\n            {randomTag && randomTagVideos.length > 0 && (\n              <section>\n                <motion.h2 \n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  transition={{ delay: 0.6 }}\n                  className=\"text-3xl font-bold text-white mb-8 flex items-center gap-3\"\n                >\n                  <span className=\"text-green-400\">\n                    <DiscoverIcon />\n                  </span> \n                  Discover: \n                  <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400\">\n                    {randomTag}\n                  </span>\n                </motion.h2>\n                \n                <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8 gap-4 sm:gap-6\">\n                  {randomTagVideos.map((video, index) => (\n                    <motion.div\n                      key={`tag-${video.id}`}\n                      initial={{ opacity: 0, scale: 0.9 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: 0.6 + index * 0.03 }}\n                    >\n                      <VideoCard video={video} onClick={() => handleVideoClick(video.slug)} />\n                    </motion.div>\n                  ))}\n                </div>\n              </section>\n            )}\n          </>\n        )}\n      </main>\n    </div>\n  );\n}\n\n// Enhanced VideoCard with better mobile optimization\nfunction VideoCard({ video, onClick, isNew = false }: { video: Video; onClick: () => void; isNew?: boolean }) {\n  const [imageLoaded, setImageLoaded] = useState(false);\n  const rating = calculateRating(video.views);\n  \n  return (\n    <motion.div\n      whileHover={{ y: -4, scale: 1.02 }}\n      whileTap={{ scale: 0.98 }}\n      onClick={onClick}\n      className=\"cursor-pointer group relative\"\n    >\n      <div \n        className=\"relative overflow-hidden rounded-xl bg-gradient-to-br from-gray-900 to-gray-800 shadow-lg hover:shadow-pink-500/20 transition-all duration-500\"\n        style={{ aspectRatio: '2/3' }}\n      >\n        {!imageLoaded && (\n          <div className=\"absolute inset-0 animate-pulse bg-gradient-to-br from-gray-800 to-gray-700\"></div>\n        )}\n        \n        <img\n          src={video.cover_url || video.poster_url}\n          alt={video.name}\n          className={`w-full h-full object-cover transition-all duration-700 group-hover:scale-110 ${\n            imageLoaded ? 'opacity-100' : 'opacity-0'\n          }`}\n          onLoad={() => setImageLoaded(true)}\n          loading=\"lazy\"\n        />\n        \n        <div className=\"absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500\">\n          <div className=\"absolute bottom-0 left-0 right-0 p-4\">\n            <motion.div \n              initial={{ y: 20, opacity: 0 }}\n              whileHover={{ y: 0, opacity: 1 }}\n              className=\"flex items-center justify-center mb-2\"\n            >\n              <span className=\"bg-gradient-to-r from-pink-600 to-purple-600 text-white px-6 py-3 rounded-full text-sm font-bold flex items-center gap-2 shadow-lg transform\">\n                <span className=\"text-lg\">‚ñ∂</span> Play Now\n              </span>\n            </motion.div>\n          </div>\n        </div>\n        \n        <div className=\"absolute top-6 right-6 flex gap-3\">\n          {isNew && (\n            <span className=\"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-full text-sm font-bold animate-pulse\">\n              NEW\n            </span>\n          )}\n        </div>\n        \n        <div className=\"absolute top-2 right-2\">\n          <span className=\"bg-black/40 backdrop-blur-sm text-gray-300 px-2 py-1 rounded-md text-xs font-medium\">\n            HD\n          </span>\n        </div>\n      </div>\n      \n      <div className=\"mt-2 px-1\">\n        <h3 className=\"font-bold text-white text-sm sm:text-base line-clamp-2 group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-pink-400 group-hover:to-purple-400 transition-all\">\n          {video.name}\n        </h3>\n        <div className=\"flex items-center justify-between mt-1 text-xs sm:text-sm\">\n          <span className=\"text-yellow-400 flex items-center gap-0.5\">\n            <span>‚òÖ</span>\n            {rating.toFixed(1)}\n          </span>\n          <span className=\"text-gray-400\">{(video.views / 1000).toFixed(1)}K</span>\n        </div>\n        <p className=\"text-xs sm:text-sm text-transparent bg-clip-text bg-gradient-to-r from-pink-400 to-purple-400 mt-1 font-bold\">\n          {video.brand}\n        </p>\n      </div>\n    </motion.div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}